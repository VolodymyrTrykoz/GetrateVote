"use strict";window.fbAsyncInit=function(){FB.init({appId:0x7aca43f245f7b,autoLogAppEvents:!0,xfbml:!0,version:"v3.1"}),FB.AppEvents.logPageView(),FB.getLoginStatus()},function(e,a,t){var n,o=e.getElementsByTagName(a)[0];e.getElementById(t)||(n=e.createElement(a),n.id=t,n.src="//connect.facebook.net/en_US/sdk.js",o.parentNode.insertBefore(n,o))}(document,"script","facebook-jssdk");var userName;$(document).ready(function(){function e(e){"connected"!==e.status?FB.login(function(e){"connected"===e.status&&a(e)},{scope:"public_profile, email, user_link"}):a(e)}function a(e){(e||e.authResponse||e.authResponse.accessToken)&&axios.post(h+"/api/auth/facebook",{access_token:e.authResponse.accessToken}).then(function(e){var a=e.data;if(a){var t={accessToken:a.token.accessToken,refreshToken:a.token.refreshToken,id:a.user.id,name:a.user.firstname+" "+a.user.lastname,email:a.user.email,calendar:a.user.calendar?a.user.calendar:{},expiresData:a.token.expiresIn};localStorage.setItem("userData",JSON.stringify(t)),o(t)}window.location.href="gift.html"}).catch(console.log)}function t(){var e=localStorage.getItem("userData");if(e&&!n()){o(JSON.parse(e));var a="ru"===localStorage.getItem("language")?"Сделать ставку":"Зробити ставку";return $(".logIn").removeClass("logIn").html(""+a).attr("href","calendar.html"),!0}}function n(){var e=JSON.parse(localStorage.getItem("userData")),a=e.expiresData;return new Date(a)<new Date}function o(e){var a=e.name;userName=a,$(".user__name").html(a+", <br> "+u),$(".logOut").removeClass("invisible")}function s(){c||(c=!0,i.addClass("opened"),f.addClass("body-blurred"),TweenMax.to(m,.5,{x:0,autoAlpha:1}),$("html").css("overflow","hidden"))}function l(){i.removeClass("opened"),f.removeClass("body-blurred"),c=!1,TweenMax.to(m,.1,{x:150,autoAlpha:0}),TweenMax.to(i,.1,{scale:1}),$("html").css("overflow","auto")}var c=!1,r=localStorage.getItem("language")||"ru",u="ru"===localStorage.getItem("language")?"вы успешно авторизировались":"ви успішно авторизувались",i=$(".header__menu"),g=$(".header__menuWrapper"),d=$("html"),f=$("body"),m=$(".menu"),h="https://dekurs.com.ua";$(".logIn").on("click",function(a){if(a.preventDefault(),t())return window.location.href="calendar.html";FB.getLoginStatus(function(a){e(a)})}),$(".logOut").on("click",function(){l(),FB.getLoginStatus(function(e){window.location.href="index.html",localStorage.clear(),"connected"===e.status&&FB.logout(function(e){})})}),$(document).on("mouseup",function(e){c&&f.is(e.target)&&l()}),g.on("mousedown",function(){TweenMax.to(i,.3,{scale:.8}),g.on("mouseup",function(){s()}),i.is(".opened")&&(i.on("mousedown",function(){TweenMax.to(i,.3,{scale:.8})}),g.on("mouseup",function(){l()}))}),i.on("mouseleave",function(){TweenMax.to(i,.3,{scale:1})}),$(".lang__switch a").on("click",function(){$(".lang__switch a").removeClass("langActive"),$(this).addClass("langActive")}),null===localStorage.getItem("language")&&localStorage.setItem("language","ru");domI18n({selector:"[data-translatable]",separator:" // ",languages:["ru","ua"],defaultLanguage:"ru",currentLanguage:""+r});$(".lang__switch a").each(function(e,a){"ru"===localStorage.getItem("language")&&$(".ru").addClass("langActive"),$(a).on("click",function(){$(a).removeClass("langActive"),$(this).addClass("langActive");var e=$(this).attr("class").substr(0,2);localStorage.setItem("language",""+e),d.css("overflow","hidden"),f.addClass("readyState"),location.reload()})}),function(){$(".lang__switch a").each(function(e,a){$(this).attr("class").substr(0,2)===r&&$(this).addClass("langActive")})}(),t(),d.css("overflow","auto"),f.removeClass("readyState")});